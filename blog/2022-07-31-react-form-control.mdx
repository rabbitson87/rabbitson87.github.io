---
slug: react-form-control
title: 효율적인 React form 컨트롤
authors: [rabbitson87]
tags: [react form]
---

React로 프로젝트를 만들다보면 회원가입 등 폼을 접하게 돼요.  
먼저 라이브러리없이 기본기능으로만 구현된 폼을 통해 간단히 살펴보면서 장단점을 알아봐요.

## React 기본 폼 다루기

다음은 html의 form,label,input을 활용한 예제에요.
직접 수정도 가능하며 이름과 비밀번호를 타이핑할때마다 반응하며 보여주게 작성되었어요.  
마지막으로 로그인 버튼을 누르면 입력된 아이디로 로그인 성공!이라는 문구를 보여줘요.

```jsx live
function 기본() {
  const [아이디, 아이디입력] = useState(""); // 기본값 ''로 초기화
  const [비밀번호, 비밀번호입력] = useState(""); // 기본값 ''로 초기화
  return (
    <form onSubmit={() => alert(`${아이디}로 로그인 성공!`)}>
      <div>
        <label>아이디: </label>
        <input
          type="text"
          value={아이디}
          placeholder="아이디를 입력해주세요."
          onChange={(event) => 아이디입력(event.target.value)}
        />
        <label>비밀번호: </label>
      </div>
      <div>
        <input
          type="password"
          value={비밀번호}
          placeholder="비밀번호를 입력해주세요."
          onChange={(event) => 비밀번호입력(event.target.value)}
        />
      </div>
      <button type="submit">로그인</button>
      <p>아이디: {아이디}</p>
      <p>비밀번호: {비밀번호}</p>
    </form>
  );
}
```

간단한 폼을 구현해보고 살펴 보았어요. 먼저 기본폼의 장점과 단점을 볼게요.

### 장점

1. 라이브러리없이 구현되어 가벼워요.
2. 코드를 알아보기가 쉬워요.

### 단점

1. 입력값을 검사 할 수가 없어요.
2. 로그인 버튼을 누르면 무조건 실행돼요.

기본폼이지만 단점을 하나하나 해결해보면서 쓸만한 폼을 같이 완성시켜봐요!
먼저 1번사항부터 개선시켜봐요 입력값을 검사하기 위해선 입력 input의 onChange 이벤트가 발생할때마다 체크해야돼요.

```jsx showLineNumbers
<input
  type="text"
  value={아이디}
  placeholder="아이디를 입력해주세요."
  onChange={(event) => 아이디입력(event.target.value)} // 이부분 변경
  // highlight-start
  onChange={(event) => {
    const { value } = event.target;
    if (!value || value === "") alert("아이디가 비어있어요!");
    아이디입력(event.target.value);
  }}
  // highlight-end
/>
```

이렇게만 구현한다면 입력값이 변할때에만 값이 이상있는지 체크한 후 alert를 띄워줄 거에요. 단지 값만 체크해줄뿐 2번사항을 개선시키기에는 적절하지가 않네요.  
그럼 값체크 부분을 로그인 버튼을 누를때 사용하기 위해서 값을 따로 기록해줄 거에요.  
그래서 유효한 값이면 에러기록을 없애주고 유효하지않은 값이면 에러기록을 기록해주는 로직을 추가해 볼게요.  
거기에다 에러가 있으면 로그인 버튼을 눌러도 실행되지 않도록 바꿔 볼게요.

```jsx live
function 기본() {
  const [아이디, 아이디입력] = useState(""); // 기본값 ''로 초기화
  const [비밀번호, 비밀번호입력] = useState(""); // 기본값 ''로 초기화

  const [에러, 에러기록] = useState({}); // 빈 object값으로 초기화
  return (
    <form
      onSubmit={() => {
        if (Object.keys(에러).length === 0) alert(`${아이디}로 로그인 성공!`);
        return;
      }}
    >
      <div>
        <label>아이디: </label>
        <input
          type="text"
          value={아이디}
          placeholder="아이디를 입력해주세요."
          onChange={(event) => {
            const { value } = event.target;
            if (!value || value === "")
              // 값이 있는지 체크
              에러기록({ ...에러, 아이디: "아이디가 비어있어요!" });
            else {
              에러기록((현재에러) => {
                const 현재에러복사본 = { ...현재에러 };
                delete 현재에러복사본.아이디;
                return 현재에러복사본;
              });
            }
            아이디입력(event.target.value);
          }}
        />
        {에러["아이디"] && <p style={{ color: "red" }}>{에러["아이디"]}</p>}
      </div>
      <div>
        <label>비밀번호: </label>
        <input
          type="password"
          value={비밀번호}
          placeholder="비밀번호를 입력해주세요."
          onChange={(event) => {
            const { value } = event.target;
            if (!value || value === "")
              // 값이 있는지 체크
              에러기록({ ...에러, 비밀번호: "비밀번호가 비어있어요!" });
            else {
              에러기록((현재에러) => {
                const 현재에러복사본 = { ...현재에러 };
                delete 현재에러복사본.비밀번호;
                return 현재에러복사본;
              });
            }
            비밀번호입력(event.target.value);
          }}
        />
        {에러["비밀번호"] && <p style={{ color: "red" }}>{에러["비밀번호"]}</p>}
      </div>
      <button type="submit">로그인</button>
      <p>아이디: {아이디}</p>
      <p>비밀번호: {비밀번호}</p>
    </form>
  );
}
```
